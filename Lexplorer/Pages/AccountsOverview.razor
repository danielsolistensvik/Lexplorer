@page "/account";

<PageTitle>The Lexplorer - Accounts</PageTitle>
<MudContainer Fixed="true" Class="my-3">
    <MudTable Dense="true" Striped="true" Bordered="true" Items="@accounts" Hover="true" Loading=@isLoading>
        <ToolBarContent>
            <MudText Typo="Typo.h6">Latest accounts</MudText>
            <MudSpacer />
            <MudIconButton Icon="@Icons.Filled.FirstPage" Disabled=@(gotoPage == 1) OnClick="@(() => gotoPage = 1)" />
            <MudIconButton Icon="@Icons.Filled.NavigateBefore" Disabled=@(gotoPage == 1) OnClick="@(() => gotoPage -= 1)" />
            <MudNumericField HideSpinButtons="true" @bind-Value="gotoPage" Label="Page" Variant="Variant.Outlined" Min="1" Margin="Margin.Dense" Class="flex-grow-0" Style="width:150px;" />
            <MudIconButton Icon="@Icons.Filled.NavigateNext" Disabled=@(accounts!.Count < pageSize) OnClick="@(() => gotoPage += 1)" />
            <MudSpacer />
            <MudSelect @bind-Value="@filterAccounts" T="string" Label="Filter by type">
                <MudSelectItem Value="@("All")" />
                <MudSelectItem Value="@("User")" />
                <MudSelectItem Value="@("Pool")" />
                <MudSelectItem Value="@("ProtocolAccount")" />
            </MudSelect>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>Id</MudTh>
            <MudTh>Type</MudTh>
            <MudTh>L1 address</MudTh>
            <MudTh>Created At (UTC)</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Account Id">@LinkHelper.GetObjectLink(context)</MudTd>
            <MudTd DataLabel="Type">@context.typeName</MudTd>
            <MudTd DataLabel="L1Address"><L1AccountLink address="@context?.address" /></MudTd>
            <MudTd DataLabel="CreatedAt">@context.createdAtTransaction?.verifiedAt</MudTd>
        </RowTemplate>
    </MudTable>
</MudContainer>

