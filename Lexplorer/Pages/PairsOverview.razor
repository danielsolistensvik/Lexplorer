@page "/pairs"

<PageTitle>The Lexplorer - Pairs</PageTitle>

<MudContainer Fixed="true" Class="my-3">
    @if (pairsData != null && uniswapTokens != null && uniswapTokens!.Count > 0)
    {
        <MudGrid>
            <MudItem sm="12">
                <MudText Typo="Typo.h6">Pairs <MudText Typo="Typo.caption">Current Page: @pageNumber</MudText></MudText>
                <MudTable Dense="true" Items="@pairsData.data!.pairs" Hover="true" Loading=@isLoading Class="mt-3">
                    <HeaderContent>
                        <MudTh>Pair</MudTh>
                        <MudTh Style="text-align:right">Volume 24H</MudTh>
                        <MudTh Style="text-align:right">Volume 7D</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd DataLabel="Pair">@context.token0!.symbol/@context.token1!.symbol</MudTd>
                        @if (@context.dailyEntities!.Count > 0 && @context.weeklyEntities!.Count > 0 && uniswapTokens!.Where(c => c.address! == @context.token1!.address).FirstOrDefault()!.data!.tokenDayDatas!.Count > 0)
                        {
                        <MudTd Style="text-align:right" DataLabel="Volume 24H">$@TokenAmountConverter.ToStringWithExponent(@context.dailyEntities[0].tradedVolumeToken1Swap, @context.token1!.decimals, uniswapTokens!.Where(c => c.address! == @context.token1!.address).FirstOrDefault()!.data!.tokenDayDatas![0].priceUSD) </MudTd>
                        <MudTd Style="text-align:right" DataLabel="Volume 7D">$@TokenAmountConverter.ToStringWithExponent(@context.weeklyEntities[0].tradedVolumeToken1Swap, @context.token1!.decimals, uniswapTokens!.Where(c => c.address! == @context.token1!.address).FirstOrDefault()!.data!.tokenDayDatas![0].priceUSD) </MudTd>
                        }
                        else
                        {
                        <MudTd Style="text-align:right" DataLabel="Volume 24H">$@TokenAmountConverter.ToStringWithExponent(0, @context.token1!.decimals, 0) </MudTd>
                        <MudTd Style="text-align:right" DataLabel="Volume 7D">$@TokenAmountConverter.ToStringWithExponent(@context.weeklyEntities![0].tradedVolumeToken1Swap, @context.token1!.decimals, 0) </MudTd>
                        }

                </RowTemplate>
            </MudTable>
        </MudItem>
    </MudGrid>
        if (pageNumber != "0")
        {
            <MudButton Variant="Variant.Filled" Color="Color.Info" OnClick="GoToStartPage">Back to Start</MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="GoToPreviousPage">Previous Page</MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Secondary" OnClick="GoToNextPage">Next Page</MudButton>
        }
        else
        {
            <MudButton Variant="Variant.Filled" Color="Color.Secondary" OnClick="GoToNextPage">Next Page</MudButton>
        }
    }
    else if (pairsData != null && pairsData!.data!.pairs!.Count == 0)
    {
        <MudText Typo="Typo.h6">No pairs to show</MudText>
        <MudButton Variant="Variant.Filled" Color="Color.Info" OnClick="GoToStartPage">Back to Start</MudButton>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="GoToPreviousPage">Previous Page</MudButton>
        <MudButton Variant="Variant.Filled" Color="Color.Secondary" OnClick="GoToNextPage">Next Page</MudButton>
    }
    else
    {
        <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
    }
</MudContainer>
